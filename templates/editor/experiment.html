{% extends 'base.html' %}
{% load static %}

{% block meta %}
<link rel="styleshet" href="{% static 'css/experiment.css' %}">
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
{% endblock meta %}




{% block content %}


<div id="editor-app">

  <table class="grid">
    <div v-for="entry in puzzle.grid" class="cell">[[entry]]</div>
  </table>


  <div>
    <b>Across:</b>
    <ul>
      <li v-for="clue in puzzle.clues.across">[[clue]]</li>
    </ul>
    <b>Down:</b>
    <ul>
      <li v-for="clue in puzzle.clues.down">Down: [[clue]]</li>
    </ul>
  </div>
</div>


<!-- Pass in puzzle json from Django template context -->
{{ puzzle|json_script:"puzzle-data" }}

<script>
  // get json string store it in a variable
  var puzzleData = JSON.parse(document.querySelector('#puzzle-data').textContent);

  Vue.component('x-cell', {
    props: {
      content: String
    },
    delimiters: ['[[', ']]'],
    data: function () {
      return {
        isActive: false,
        input: '',
        count: 0,
      }
    },
    computed: {
      handle() {
        alert('hi')
      }
    },
    template: `<div class="cell">[[input]] and [[count]]</div>`
  })



  Vue.component('x-clues', {
    props: ['across', 'down'],
    delimiters: ['[[', ']]'],
    template: `<p>Hi: [[content]]</p>`
  })



  Vue.component('x-grid', {
    props: ['puzzle'],
    delimiters: ['[[', ']]'],
    template: `<div class="grid"><slot></slot></div>`
  })


  const editor = new Vue({
    el: '#editor-app',
    delimiters: ['[[', ']]'],
    data: {
      puzzle: puzzleData,
    },
  });
</script>

{% endblock content %}